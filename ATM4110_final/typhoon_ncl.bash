#!/bin/bash

#KOMPASU  100901-100903
typhoon=( "KOMPASU"  "2010090100" "2010090323"
	  "0,0.2,0.4,0.6,0.8,1.0,1.5,2,2.5,3,3.5,4,4.5,5,6,7,8,9,10,12,14,16,18,20,25,30,35"
	  "0,0.2,0.5,1.0,1.5,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10.0,11,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,45,50,55,60,65,70,80,90,100,110,120"
#RUSA     020830-020901	  
	  "RUSA"     "2002083000" "2002090123"
	  "0,0.2,0.4,0.6,0.8,1.0,1.5,2,2.5,3,3.5,4,4.5,5,6,7,8,9,10,12,14,16,18,20,25,30,35,40,50,60,80,100,120,150,200"
	  "0.0,0.5,1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10,12,14,16,18,20,25,30,35,40,45,50,60,70,80,90,100,110,120,130,140,150,200,250,300,400,500,600,700,870"
#MAEMI    030911-030913
          "MAEMI"    "2003091100" "2003091323"
          "0,0.2,0.4,0.6,0.8,1.0,1.5,2,2.5,3,3.5,4,4.5,5,6,7,8,9,10,12,14,16,18,20,25,30,35,40,50,60,80,100,120"
          "0.0,0.5,1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10,12,14,16,18,20,25,30,35,40,45,50,60,70,80,90,100,110,120,130,140,150,160,170,180,200,220,250,300,410"
#MEGI     040817-040819
          "MEGI"     "2004081700" "2004081923" 
          "0,0.2,0.4,0.6,0.8,1.0,1.5,2,2.5,3,3.5,4,4.5,5,6,7,8,9,10,12,14,16,18,20,25,30,35,40,50,60,80,100"
          "0.0,0.5,1.0,2.0,4.0,6.0,8.0,10,12,14,16,18,20,25,30,35,40,45,50,55,60,65,70,80,90,100,110,120,130,140,150,160,170,180,190,200,230,260,290,320,360"
#NARI     070913-070918
          "NARI"     "2007091300" "2007091823"
          "0,0.2,0.4,0.6,0.8,1.0,1.5,2,2.5,3,3.5,4,4.5,5,6,7,8,9,10,12,14,16,18,20,25,30,35,40,50,60,80,100,120"
          "0.0,0.5,1.0,1.5,2.0,3.0,4.0,6.0,8.0,10,12,14,16,18,20,22,24,26,28,30,33,36,39,42,45,50,55,60,65,70,75,80,90,100,110,120,140,160,200,300,420"
#DIANMU   100810-100812
	  "DIANMU"   "2010081000" "2010081223"
	  "0,0.2,0.4,0.6,0.8,1.0,1.5,2,2.5,3,3.5,4,4.5,5,6,7,8,9,10,12,14,16,18,20,25,30,35,40"
	  "0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5,4.0,4.5,5.0,6.0,7.0,8.0,9.0,10,12,14,16,18,20,22,24,26,28,30,35,40,45,50,55,60,70,80,90,100,110,120,130,140,155"
#RAMMASUN 020704-020706
	  "RAMMASUN" "2002070400" "2002070623"
	  "0,0.2,0.4,0.6,0.8,1.0,1.5,2,2.5,3,3.5,4,4.5,5,6,7,8,9,10,12,14,16,18,20,25,30,35,40,50"
	  "0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10,12,14,16,18,20,22,24,26,28,30,33,36,39,42,45,48,51,54,57,60,70,80,90,100,110,120,150,180,220,255"
#EWINIAR  060709-060711
	  "EWINIAR"  "2006070900" "2006071123"
	  "0,0.2,0.4,0.6,0.8,1.0,1.5,2,2.5,3,3.5,4,4.5,5,6,7,8,9,10,12,14,16,18,20,25,30,35,40,50"
	  "0.0,0.5,1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10,12,14,16,18,20,25,30,35,40,45,50,55,60,70,80,90,100,110,120,130,140,150,160,170,180,200,220,240,265")
	  
for n in `seq 0 7`;do	  
  name="${typhoon[((0+5*$n))]}"  
  t1="${typhoon[((1+5*$n))]}"
  t2="${typhoon[((2+5*$n))]}"
  levelhour="${typhoon[((3+5*$n))]}"
  levelday="${typhoon[((4+5*$n))]}"
  echo "typhoon_ncl.bash "${name} $t1 $t2
  rm -f ./ncl/${name}_*.ncl
  while [ $t1 -le $t2 ];do
    yyyy=${t1:0:4}
    mm=${t1:4:2}
    dd=${t1:6:2}
    hh=${t1:8:2}
    sed -e  "s/YYYY/${yyyy}/g;s/MMDDHH/${mm}${dd}${hh}/g;s/LEVELS/${levelhour}/g;s/TYPHOON/${name}/g" ./ncl/typhoon.ncl > ./ncl/${name}_${mm}${dd}${hh}.ncl
    if [ $hh -eq 00 ];then
      sed -e  "s/YYYY/${yyyy}/g;s/MMDDHH/${mm}${dd}/g;s/LEVELS/${levelday}/g;s/TYPHOON/${name}/g;s/Hourly/Daily/g;s/hour/day/g" ./ncl/typhoon.ncl > ./ncl/${name}_${mm}${dd}.ncl
    fi	
    t1=`date -d "$yyyy$mm$dd $hh 1hours" +%Y%m%d%H`
  done
done

